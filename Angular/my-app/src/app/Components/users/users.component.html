

<button 
  class="btn-sm-crud btn mt-4"
  (click)="showDialog()">
  Add User
</button>

<p-dialog
  header="Add User"
  [(visible)]="displayDialog"
  [modal]="true"
  [style]="{ width: '50vw' }"
  >

  <div class="p-fluid">
    <!-- Username -->
    <div class="field mt-4">
      <label for="username" class="mb-2">Username</label>
      <input 
        id="username" 
        type="text"
        [(ngModel)]="username"
        class="p-inputtext p-component w-full"/>
    </div>

    <!-- Password -->
    <div class="field mt-4">
      <label for="password" class="mb-2">Password</label>
      <input 
        id="password" 
        type="password"
        [(ngModel)]="password"
        class="p-inputtext p-component w-full"/>
    </div>

    <!-- Role -->
    <div class="field mt-4">
      <label for="role" class="mb-2">Role</label>
      <p-dropdown 
        [options]="roles"
        [(ngModel)]="role"
        placeholder="Select Role"
        [appendTo]="'body'">
      </p-dropdown>
    </div>
  </div>


  <ng-template pTemplate="footer">
    <div class="d-flex justify-content-between">
      <button  
        class="btn-danger btn"
        (click)="displayDialog=false">
        Close
      </button>
      <button 
        pButton 
        label="Save"
        icon="pi pi-check"
        class="btn-sm-crud"
        (click)="addUser()">
      </button>
    </div>
  </ng-template>
</p-dialog>

<p-table 
  [value]="alluser"
  [paginator]="true"
  [rows]="5"
  [rowsPerPageOptions]="[5, 10, 20]"
  responsiveLayout="scroll"
  responsiveLayout="scroll">

  <!-- Header -->
  <ng-template pTemplate="header">
    <tr>
      <th>ID</th>
      <th>Username</th>
      <th>Roles</th>
      <th>Action</th>
    </tr>
  </ng-template>

  <!-- Body -->
  <ng-template pTemplate="body" let-user>
    <tr>
      <td>{{ user.id }}</td>
      <td>{{ user.username }}</td>
      <td>
        <span *ngFor="let role of user.roles; let i = index">
          {{ role }}<span *ngIf="i < user.roles.length - 1"> , </span>
        </span>
      </td>
      <td>
  <button
  class="btn btn-sm btn-danger"
  (click)="openDeleteDialog(user.id)">
  <i class="fa-solid fa-trash"></i>
</button>

      </td>
    </tr>
  </ng-template>
</p-table>




<p-dialog
  header=" Delete Confirmation"
  [(visible)]="canlepop"
  [modal]="true"
  [style]="{ width: '30vw' }"
>
  <p>Are you sure you want to delete this user?</p>
  
  <ng-template pTemplate="footer">
  <div class="d-flex justify-content-between">
      <button
      pButton
      label="Cancle"
      icon="pi pi-times"
      class="btn-sm-crud btn btn-secondary"
      (click)="canlepop = false"
    ></button>

    <button
      pButton
      label="Delete"
      icon="pi pi-trash"
      class="btn-sm-crud btn btn-danger"
      (click)="confirmDeleteUser()"
    ></button>
  </div>
  </ng-template>
</p-dialog>

